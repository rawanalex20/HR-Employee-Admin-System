<p style="color: green"><%= notice %></p>

<h1>Teams</h1>

<div class="new-record"><%= button_to "Add Team", new_team_path, method: :get %></div>

<div id="teams">
  <table>
  <tr>
    <th>Name</th>
    <th>Description</th>
    <th>Members </th>
    <th>Team lead </th>
    <th></th>
  </tr>

  <% @teams.each do |team| %>
    <tr>
  <% employee = Employee.find_by(id:team.team_lead_id) %>
    <% lead = nil %>
    <% unless employee == nil then%>
      <% lead = employee.name %>
    <% end %>
    
    <td><%= team.name %></td>
    <td><%= team.description %></td>
    <td>
    <% employees = [] %>
    <% team.employees.each do |employee| %>
      <div>
      <%= employee.name%>
      </div>
    <% end%>
    </td>
    <td><%= lead %></td>
    <td>
      <div class="tb-btns"><%= button_to "Show", team, method: :get %></div>
      <div class="tb-btns"><%= button_to "Edit", edit_team_path(team), method: :get %></div>
      <div class="tb-btns"><%= button_to "Delete", team, method: :delete %></div>
    </td>
    </tr>
    
  <% end %>
</table>
</div>

