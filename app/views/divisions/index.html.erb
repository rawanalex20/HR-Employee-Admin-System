<p style="color: green"><%= notice %></p>

<h1>Divisions</h1>

<div id="divisions">
<table>
  <tr>
    <th>Name</th>
    <th>Description</th>
    <th>Manager</th>
    <th>Teams</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

  <% @divisions.each do |division| %>
    <tr>
    <% employee = Employee.find_by(id:division.manager_id) %>
    <% manager = nil %>
    <% unless employee == nil then%>
      <% manager = employee.name %>
    <% end %>
    <% teams = [] %>
    <% division.teams.each do |team| %>
      <% teams.append(team.name)%>
    <% end%>
    <td><%= division.name %></td>
    <td><%= division.description %></td>
    <td><%= manager %></td>
    <td><%= teams.join(', ') %></td>
    <td><%= link_to "Show", division %></td>
    <td><%= link_to "Edit", edit_division_path(division) %></td>
    <td><%= button_to "Delete", division, method: :delete %></td>
    </tr>
    
  <% end %>
</table>
</div>

<%= link_to "New division", new_division_path %>
